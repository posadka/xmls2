<?xml version="1.0" encoding="UTF-8" standalone="yes" ?> 
<?xml-stylesheet href="hide-it.xsl" type="text/xsl"?>
<layoutype>fuckOFF</layoutype>

<item>
    <title>[COLOR orchid]¤[/COLOR] [B][COLOR white]WWE[/COLOR] [COLOR orchid] LIVE (RS)[/COLOR][/B] [COLOR orchid]¤[/COLOR]</title>
<link>$doregex[makelist]</link>
    <thumbnail>special://home/addons/script.thecrew.artwork/resources/media/thecrew/wwe_network.png</thumbnail>
    <fanart>special://home/addons/script.thecrew.artwork/resources/fanart/wwe-network_fanart.png</fanart>
<regex>
  <name>makelist</name>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data, Cookie_Jar, m, url=''):
    from resources.lib.modules import control, client
    import re, xbmcgui
    from urllib.parse import urlparse
    if not control.infoLabel('Container.PluginName') == 'plugin.video.thecrew': return
    UA = 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36'
    sub_match = re.search(r"getRandomStream\('.*?',\s*'(\d+)'\)", page_data)
    if not sub_match:
        return
    subdomain = sub_match.group(1)
    streams = re.findall(r"getRandomStream\('([^']+\.m3u8)'", page_data)
    if not streams:
        return
    domains_url = 'https://roxiestreams.info/domains.txt'
    domains_data = client.request(domains_url)
    if not domains_data:
        return
    domains = [d.strip() for d in domains_data.splitlines() if d.strip()]
    if not domains:
        return
    stream_urls = []
    for s in streams:
        domain = domains[0]  # Use first domain (stable)
        stream_urls.append(f"https://{subdomain}.{domain}/{s}")
    if len(stream_urls) > 1:
        labels = [f"Stream {i+1}" for i in range(len(stream_urls))]
        choice = xbmcgui.Dialog().select("Select Stream", labels)
        if choice == -1:
            return
        stream_url = stream_urls[choice]
    else:
        stream_url = stream_urls[0]
    parsed = urlparse(url)
    origin = f"{parsed.scheme}://{parsed.netloc}"
    return (
        stream_url
        + '|User-Agent=' + UA
        + '&Referer=' + url
        + '&Origin=' + origin
    )
]]></expres>
<page>https://roxiestreams.info/wwe-streams</page>
</regex>
</item>

<item>
<title>[COLOR orchid]¤[/COLOR] [B][COLOR white]WWE LIVE[/COLOR] [COLOR orchid] (MS)[/COLOR][/B] [COLOR orchid]¤[/COLOR]</title>
<link>$doregex[makelist]</link>
    <thumbnail>special://home/addons/script.thecrew.artwork/resources/media/thecrew/wwe_network.png</thumbnail>
    <fanart>special://home/addons/script.thecrew.artwork/resources/fanart/wwe-network_fanart.png</fanart>
<regex>
<name>makelist</name>
<listrepeat><![CDATA[
        <title>[COLOR orange][makelist.param2][/COLOR]</title>
        <link>$doregex[makelist2]</link>
        <thumbnail></thumbnail>
]]></listrepeat>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m,url = ''):
    from resources.lib.modules import client,control
    import re
    if not control.infoLabel('Container.PluginName') == 'plugin.video.thecrew': return
    r = re.findall('(?s)<a class="card" href="([^"]*).*?le">([^<]*)', page_data)
    return r
]]></expres>
<page>https://methstreams.ms/league/wwestreams</page>
</regex>
<regex>
  <name>makelist2</name>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m,url = ''):
    from resources.lib.modules import client
    import xbmc,xbmcgui
    pDialog = xbmcgui.DialogProgress()
    pDialog.create('[B][COLOR orchid]THE CREW SPORTS[/COLOR][/B]', 'The Crew Is Loading Your Event Please Wait....')
    url = client.external('https://methstreams.ms[makelist.param1]')
    pDialog.update(65,'The Crew Is Loading Your Event Please Wait....')
    pDialog.close()
    if (pDialog.iscanceled()): return
    return url
]]></expres>
<page></page>
</regex>
</item>

<item>
<title>[COLOR orchid]¤[/COLOR] [B][COLOR white]TNA LIVE[/COLOR] [COLOR orchid] (MS)[/COLOR][/B] [COLOR orchid]¤[/COLOR]</title>
<link>$doregex[makelist]</link>
    <thumbnail>special://home/addons/script.thecrew.artwork/resources/media/thecrew/wwe_network.png</thumbnail>
    <fanart>special://home/addons/script.thecrew.artwork/resources/fanart/wwe-network_fanart.png</fanart>
<regex>
<name>makelist</name>
<listrepeat><![CDATA[
        <title>[COLOR orange][makelist.param2][/COLOR]</title>
        <link>$doregex[makelist2]</link>
        <thumbnail></thumbnail>
]]></listrepeat>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m,url = ''):
    from resources.lib.modules import client,control
    import re
    if not control.infoLabel('Container.PluginName') == 'plugin.video.thecrew': return
    r = re.findall('(?s)<a class="card" href="([^"]*).*?le">([^<]*)', page_data)
    return r
]]></expres>
<page>https://methstreams.ms/league/tna</page>
</regex>
<regex>
  <name>makelist2</name>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m,url = ''):
    from resources.lib.modules import client
    import xbmc,xbmcgui
    pDialog = xbmcgui.DialogProgress()
    pDialog.create('[B][COLOR orchid]THE CREW SPORTS[/COLOR][/B]', 'The Crew Is Loading Your Event Please Wait....')
    url = client.external('https://methstreams.ms[makelist.param1]')
    pDialog.update(65,'The Crew Is Loading Your Event Please Wait....')
    pDialog.close()
    if (pDialog.iscanceled()): return
    return url
]]></expres>
<page></page>
</regex>
</item>

<item>
<title>[COLOR orchid]¤[/COLOR] [B][COLOR white]AEW LIVE[/COLOR] [COLOR orchid] (MS)[/COLOR][/B] [COLOR orchid]¤[/COLOR]</title>
<link>$doregex[makelist]</link>
    <thumbnail>special://home/addons/script.thecrew.artwork/resources/media/thecrew/wwe_network.png</thumbnail>
    <fanart>special://home/addons/script.thecrew.artwork/resources/fanart/wwe-network_fanart.png</fanart>
<regex>
<name>makelist</name>
<listrepeat><![CDATA[
        <title>[COLOR orange][makelist.param2][/COLOR]</title>
        <link>$doregex[makelist2]</link>
        <thumbnail></thumbnail>
]]></listrepeat>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m,url = ''):
    from resources.lib.modules import client,control
    import re
    if not control.infoLabel('Container.PluginName') == 'plugin.video.thecrew': return
    r = re.findall('(?s)<a class="card" href="([^"]*).*?le">([^<]*)', page_data)
    return r
]]></expres>
<page>https://methstreams.ms/league/aew</page>
</regex>
<regex>
  <name>makelist2</name>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m,url = ''):
    from resources.lib.modules import client
    import xbmc,xbmcgui
    pDialog = xbmcgui.DialogProgress()
    pDialog.create('[B][COLOR orchid]THE CREW SPORTS[/COLOR][/B]', 'The Crew Is Loading Your Event Please Wait....')
    url = client.external('https://methstreams.ms[makelist.param1]')
    pDialog.update(65,'The Crew Is Loading Your Event Please Wait....')
    pDialog.close()
    if (pDialog.iscanceled()): return
    return url
]]></expres>
<page></page>
</regex>
</item>

<item>
<name>[COLOR orchid]¤[/COLOR] [B][COLOR white]WWE RAW[/COLOR] [COLOR orchid] REPLAYS[/COLOR][/B] [COLOR orchid]¤[/COLOR]</name>
    <thumbnail>special://home/addons/script.thecrew.artwork/resources/media/thecrew/wwe_network.png</thumbnail>
    <fanart>special://home/addons/script.thecrew.artwork/resources/fanart/wwe-network_fanart.png</fanart>
<link>$doregex[dir]</link>
<regex>
<name>dir</name>
<listrepeat>dir</listrepeat>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m,url = 'https://thechains24.com/GREENHAT/WWE%20Monday%20Night%20Raw.xml'):
    from resources.lib.modules import control
    if not control.infoLabel('Container.PluginName') == 'plugin.video.thecrew': return
    from resources.lib.indexers import lists
    lists.indexer().get(url)
]]></expres>
<page></page>
</regex>
</item>

<item>
<name>[COLOR orchid]¤[/COLOR] [B][COLOR white]WWE SMACKDOWN[/COLOR] [COLOR orchid] REPLAYS[/COLOR][/B] [COLOR orchid]¤[/COLOR]</name>
    <thumbnail>special://home/addons/script.thecrew.artwork/resources/media/thecrew/wwe_network.png</thumbnail>
    <fanart>special://home/addons/script.thecrew.artwork/resources/fanart/wwe-network_fanart.png</fanart>
<link>$doregex[dir]</link>
<regex>
<name>dir</name>
<listrepeat>dir</listrepeat>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m,url = 'https://thechains24.com/GREENHAT/WWE%20SmackDown.xml'):
    from resources.lib.modules import control
    if not control.infoLabel('Container.PluginName') == 'plugin.video.thecrew': return
    from resources.lib.indexers import lists
    lists.indexer().get(url)
]]></expres>
<page></page>
</regex>
</item>

<item>
<name>[COLOR orchid]¤[/COLOR] [B][COLOR white]WWE SPECIAL[/COLOR] [COLOR orchid] REPLAYS[/COLOR][/B] [COLOR orchid]¤[/COLOR]</name>
    <thumbnail>special://home/addons/script.thecrew.artwork/resources/media/thecrew/wwe_network.png</thumbnail>
    <fanart>special://home/addons/script.thecrew.artwork/resources/fanart/wwe-network_fanart.png</fanart>
<link>$doregex[dir]</link>
<regex>
<name>dir</name>
<listrepeat>dir</listrepeat>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m,url = 'https://thechains24.com/GREENHAT/WWE%20SPECIAL.xml'):
    from resources.lib.modules import control
    if not control.infoLabel('Container.PluginName') == 'plugin.video.thecrew': return
    from resources.lib.indexers import lists
    lists.indexer().get(url)
]]></expres>
<page></page>
</regex>
</item>

<item>
<name>[COLOR orchid]¤[/COLOR] [B][COLOR white]WWE NXT[/COLOR] [COLOR orchid] REPLAYS[/COLOR][/B] [COLOR orchid]¤[/COLOR]</name>
    <thumbnail>special://home/addons/script.thecrew.artwork/resources/media/thecrew/wwe_network.png</thumbnail>
    <fanart>special://home/addons/script.thecrew.artwork/resources/fanart/wwe-network_fanart.png</fanart>
<link>$doregex[dir]</link>
<regex>
<name>dir</name>
<listrepeat>dir</listrepeat>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m,url = 'https://thechains24.com/GREENHAT/WWE%20NXT.xml'):
    from resources.lib.modules import control
    if not control.infoLabel('Container.PluginName') == 'plugin.video.thecrew': return
    from resources.lib.indexers import lists
    lists.indexer().get(url)
]]></expres>
<page></page>
</regex>
</item>

<item>
<name>[COLOR orchid]¤[/COLOR] [B][COLOR white]AEW Dynamite[/COLOR] [COLOR orchid] REPLAYS[/COLOR][/B] [COLOR orchid]¤[/COLOR]</name>
    <thumbnail>special://home/addons/script.thecrew.artwork/resources/media/thecrew/wwe_network.png</thumbnail>
    <fanart>special://home/addons/script.thecrew.artwork/resources/fanart/wwe-network_fanart.png</fanart>
<link>$doregex[dir]</link>
<regex>
<name>dir</name>
<listrepeat>dir</listrepeat>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m,url = 'https://thechains24.com/GREENHAT/AEW%20Dynamite.xml'):
    from resources.lib.modules import control
    if not control.infoLabel('Container.PluginName') == 'plugin.video.thecrew': return
    from resources.lib.indexers import lists
    lists.indexer().get(url)
]]></expres>
<page></page>
</regex>
</item>

<item>
<name>[COLOR orchid]¤[/COLOR] [B][COLOR white]AEW Collision[/COLOR] [COLOR orchid] REPLAYS[/COLOR][/B] [COLOR orchid]¤[/COLOR]</name>
    <thumbnail>special://home/addons/script.thecrew.artwork/resources/media/thecrew/wwe_network.png</thumbnail>
    <fanart>special://home/addons/script.thecrew.artwork/resources/fanart/wwe-network_fanart.png</fanart>
<link>$doregex[dir]</link>
<regex>
<name>dir</name>
<listrepeat>dir</listrepeat>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m,url = 'https://thechains24.com/GREENHAT/AEW%20Collision.xml'):
    from resources.lib.modules import control
    if not control.infoLabel('Container.PluginName') == 'plugin.video.thecrew': return
    from resources.lib.indexers import lists
    lists.indexer().get(url)
]]></expres>
<page></page>
</regex>
</item>

<item>
<name>[COLOR orchid]¤[/COLOR] [B][COLOR white]WWE EVOLVE[/COLOR] [COLOR orchid] REPLAYS[/COLOR][/B] [COLOR orchid]¤[/COLOR]</name>
    <thumbnail>special://home/addons/script.thecrew.artwork/resources/media/thecrew/wwe_network.png</thumbnail>
    <fanart>special://home/addons/script.thecrew.artwork/resources/fanart/wwe-network_fanart.png</fanart>
<link>$doregex[dir]</link>
<regex>
<name>dir</name>
<listrepeat>dir</listrepeat>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m,url = 'https://thechains24.com/GREENHAT/WWE%20EVOLVE.xml'):
    from resources.lib.modules import control
    if not control.infoLabel('Container.PluginName') == 'plugin.video.thecrew': return
    from resources.lib.indexers import lists
    lists.indexer().get(url)
]]></expres>
<page></page>
</regex>
</item>

<item>
<name>[COLOR orchid]¤[/COLOR] [B][COLOR white]TNA IMPACT[/COLOR] [COLOR orchid] REPLAYS[/COLOR][/B] [COLOR orchid]¤[/COLOR]</name>
    <thumbnail>special://home/addons/script.thecrew.artwork/resources/media/thecrew/wwe_network.png</thumbnail>
    <fanart>special://home/addons/script.thecrew.artwork/resources/fanart/wwe-network_fanart.png</fanart>
<link>$doregex[dir]</link>
<regex>
<name>dir</name>
<listrepeat>dir</listrepeat>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m,url = 'https://thechains24.com/GREENHAT/TNA%20Impact.xml'):
    from resources.lib.modules import control
    if not control.infoLabel('Container.PluginName') == 'plugin.video.thecrew': return
    from resources.lib.indexers import lists
    lists.indexer().get(url)
]]></expres>
<page></page>
</regex>
</item>

<dir>
    <title>[COLOR orchid]¤[/COLOR] [B][COLOR white]PURELY WRESTLING [/COLOR] [COLOR orchid][/COLOR][/B] [COLOR orchid]¤[/COLOR]</title>
    <link>https://bitbucket.org/Francis_Drake/francis-drake/raw/master/purely/base.xml</link>
    <thumbnail>special://home/addons/script.thecrew.artwork/resources/media/thecrew/wwe_network.png</thumbnail>
    <fanart>special://home/addons/script.thecrew.artwork/resources/fanart/wwe-network_fanart.png</fanart>
</dir>

<item
    <title>[COLOR orchid]¤[/COLOR] [B][COLOR white] Wrestlepooloza [/COLOR] [COLOR orchid]  [/COLOR][/B] [COLOR orchid]¤[/COLOR]</title>
    <link>
        <sublink>https://too.mytherix.cz/wwe.m3u8</sublink>
        <sublink>https://too.mytherix.cz/roxiewwe.m3u8</sublink>
    </link>
    <thumbnail>special://home/addons/script.thecrew.artwork/resources/media/thecrew/wwe_network.png</thumbnail>
    <fanart>special://home/addons/script.thecrew.artwork/resources/fanart/wwe-network_fanart.png</fanart>
</item>
